// process.env.NODE_ENV = 'development'

const webpack = require('webpack') // 用于获取webpack内置的插件

const merge = require('webpack-merge') // 用来把基础配置文件融合到开发环境配置文件

const baseWebpackConfig = require('./webpack.base.conf') // 定义基础配置文件

const HtmlWebpackPlugin = require('html-webpack-plugin') // 动态生成html的插件

// 定义开发环境的配置
const devWebpackConfig = merge(baseWebpackConfig, {
  // 开发模式
  mode: 'development',

  // 报错的时候在控制台输出源码的位置 ( 开发环境 cheap-module-eval-source-map, 生产环境 cheap-module-source-map )
  devtool: 'cheap-module-eval-source-map',

  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html', // html模板路径
      filename: './index.html', // 生成的html存放路径，相对于 output.path
      inject: true // Inject all files that are generated by webpack, e.g. bundle.js
    }),
    new webpack.HotModuleReplacementPlugin() // Tell webpack we want hot reloading
  ]
})

// 导出配置
module.exports = devWebpackConfig
